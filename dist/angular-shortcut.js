!function(angular){"use strict";angular.module("ng.shortcut",[])}(angular);
!function(angular){"use strict";angular.module("ng.shortcut").directive("ngShortcut",["$parse","$location","shortcuts",function($parse,$location,shortcuts){function isSet(attrs,expr){return void 0!==attrs[expr]||attrs.hasOwnProperty(expr)}return{restrict:"A",link:function(scope,element,attrs){var shortcutKeySets=scope.$eval(attrs.ngShortcut);if(shortcutKeySets){shortcutKeySets=shortcutKeySets.split("|");var action,eventAction=function(event){return function(){element.trigger(event)}};if(isSet(attrs,"ngShortcutClick"))action=function(){element.trigger("click"),element.addClass("active-state"),setTimeout(function(){element.removeClass("active-state")},200)};else if(isSet(attrs,"ngShortcutFocus"))action=eventAction("focus");else if(isSet(attrs,"ngShortcutFastClick"))action=eventAction("click");else if(attrs.ngShortcutNavigate){var url=scope.$eval(attrs.ngShortcutNavigate);action=function(){$location.path(url)}}else if(attrs.ngShortcutAction){var fn=$parse(attrs.ngShortcutAction);action=function(){var r=fn(scope);return scope.$apply(),r}}var target;if(attrs.ngShortcutTarget){var targetExpression=attrs.ngShortcutTarget;target="."===targetExpression?$(element):targetExpression.indexOf(">")>=0?$(element).closest(targetExpression.substring(1)):$(element).find(targetExpression)}for(var k in shortcutKeySets){var keySet=shortcutKeySets[k],shortcut=shortcuts.register({keySet:keySet,action:action,target:target,keepFocus:attrs.ngShortcutKeepFocus?scope.$eval(attrs.ngShortcutKeepFocus):!1,respectInputs:scope.$eval(attrs.ngShortcutRespectInputs)||!1,passive:scope.$eval(attrs.ngShortcutPassive)||!1,description:attrs.ngShortcutDescription||""});scope.$on("$destroy",function(){shortcuts.unregister(shortcut)})}}}}}])}(angular);
!function(angular){"use strict";angular.module("ng.shortcut").factory("shortcuts",["$document",function($document){var overwriteWithout=function(arr,item){for(var i=arr.length;i>=0;i--)arr[i]===item&&arr.splice(i,1)},shortcuts=[],charKeyCodes={"delete":8,tab:9,enter:13,"return":13,esc:27,space:32,left:37,up:38,right:39,down:40,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},keyCodeChars={};for(var character in charKeyCodes){var keyCode=charKeyCodes[character];keyCodeChars[keyCode]=character}var inOrder=function(keys,initial){for(var len=keys.length,i=0;len>i;i++)charKeyCodes[keys[i]]=initial+i};inOrder("1234567890",49),inOrder("abcdefghijklmnopqrstuvwxyz",65);var modifierKeys={shift:"shift",ctrl:"ctrl",meta:"meta",alt:"alt"},parseKeySet=function(keySet){var names=keySet.split("+"),keys={};for(var i in modifierKeys)keys[modifierKeys[i]]=!1;for(var n in names){var name=names[n],modifierKey=modifierKeys[name];if(modifierKey)keys[modifierKey]=!0;else if(keys.keyCode=charKeyCodes[name],!keys.keyCode)return}return keys},parseEvent=function(e){var keys={};return keys.keyCode=charKeyCodes[keyCodeChars[e.which]],keys.meta=e.metaKey||!1,keys.alt=e.altKey||!1,keys.ctrl=e.ctrlKey||!1,keys.shift=e.shiftKey||!1,keys},match=function(k1,k2){return k1.keyCode===k2.keyCode&&k1.ctrl===k2.ctrl&&k1.alt===k2.alt&&k1.meta===k2.meta&&k1.shift===k2.shift};return $document.bind("keydown",function(e){for(var shortcut,$target=$(e.target),eventKeys=parseEvent(e),i=shortcuts.length-1;i>=0;i--)if(shortcut=shortcuts[i],(!shortcut.target||$target.closest(shortcut.target).length)&&match(eventKeys,shortcut.keys)){if(shortcut.respectInputs&&$target.is("input, textarea")&&""!==$target.val())return;shortcut.keepFocus||$target.blur();var r=shortcut.action(),passive=shortcut.passive||r===!1;return passive||e.preventDefault(),$target.is('input[type="text"], textarea')&&$target.focus(),passive}}),{shortcuts:shortcuts,register:function(shortcut){return shortcut.keys=parseKeySet(shortcut.keySet),shortcut.keys?(shortcuts.push(shortcut),shortcut):void 0},unregister:function(shortcut){overwriteWithout(shortcuts,shortcut)}}}])}(angular);